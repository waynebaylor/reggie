#
# Make sure AllowOverride is set to 'All' for the deployment directory ('/var/www', etc).
#

RewriteEngine on

#
# run everything through Controller.php
#

RewriteRule ^/?$ http://%{SERVER_NAME}%{REQUEST_URI}admin [R,L]

RewriteCond $1 !^\/?(favicon\.ico|js|css|images|pdf|files)
RewriteRule ^(.*)$ index.php [L]

########################################
# force SSL--still needs testing
########################################

# if it's a non-SSL request AND not one of the following resources, then
# redirect to same URL but with https.
#RewriteCond $1 !^\/?(favicon\.ico|js|css|images|pdf|files)
#RewriteCond %{HTTPS} !=on
#RewriteRule ^(.*)$ https://%{SERVER_NAME}%{REQUEST_URI} [R,L]

# if it's an SSL request, then rewrite to index.php.
#RewriteCond %{HTTPS} =on
#RewriteRule .* index.php [L]
########################################

#
# php settings must be set by adhost in their environment. the following
# should be commented when running there.
#

# magic_quotes_gpc cannot be set by ini_set() in a script.
php_flag magic_quotes_gpc Off
